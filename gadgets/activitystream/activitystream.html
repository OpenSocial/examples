
<html>
  <head>
    <title>Activity Stream</title>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <link href="css/activitystream.css" rel="stylesheet" type="text/css">
  </head>
  <body>   
    <div id="activity-stream" >
      <span>Loading activities...</span>
      <div class="progress progress-striped active" >
        <div id="progress_bar" class="bar" style="width: 10%;" >&nbsp;</div>
      </div>
    </div> 
    <script type="text/javascript">gadgets.window.adjustHeight();</script>

    <!-- Handlebars Templates-->
    <script type="text/x-handlebars-template" id="activity_header" >
      <div id="{{id}}" class="activity">
        <div class="header">
          {{#if title}}
          <span>{{title}}</span>
          {{else}}
          <a target="_blank" class="author" href="{{actor.url}}">{{#if actor.displayName}}{{actor.displayName}}{{else}}{{actor.id}}{{/if}}</a>
          {{formatPredicateClause verb object}} 
          {{#if target}}          
          in <a target="_blank" class="target">{{target.displayName}}</a>
          {{/if}}
          {{/if}}
        </div>
        <div class="avatar">
          <a target="_blank" href="{{actor.url}}">
            <img class="avatar-image"
                 {{getAvatarProperties actor}}
                 onerror="this.onerror=null; this.src='http://upload.wikimedia.org/wikipedia/en/b/b1/Portrait_placeholder.png';" />
          </a>
        </div>
        <div class="body">
      </script>
      <script type="text/x-handlebars-template" id="activity_footer">
        <div class="footer">
          <span class="published">
            <smnall><em>{{published}}</em></small>
          </span>
        {{#if openSocial}}
          <a href="#" id="ee_{{id}}">
            {{#if embed.preferredExperience.display}}
              {{#if embed.preferredExperience.display.altText}}
              <img alt="{{embed.preferredExperience.altText}}" 
                   src="{{embed.previewImage}}" 
                   height="{{embed.preferredExperience.display.height}}" 
                   width="{{embed.preferredExperience.display.width}}" />
              {{/if}}
              <span title="{{embed.preferredExperience.display.title}}">{{embed.preferredExperience.display.label}}</span>
            {{else}}
              <span>more...</span>
            {{/if}}  
          </a>
        {{/if}}
        </div>
      </div>
    </script>
    <script type="text/x-handlebars-template" id="activity_body_empty">
      <blockquote><p>No activities found</p></blockquote>
    </script>
    <script type="text/x-handlebars-template" id="activity_body_txt" >
        {{> header}}
        <div class="content">
          <p>{{content}}</p>
        </div>
        {{> footer}}
    </script>
    <script type="text/x-handlebars-template" id="activity_body_img" >
        {{> header}}
        <div class="content">
          <p><img class="object-image" src="{{object.image.url}}" height="{{object.image.height}}" width="{{object.image.width}}" alt="Object Image" /> {{content}}</p>
        </div>
        {{> footer}}
    </script>
    
    <script src="js/xhrprogress.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/prettydate.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.rc.2/handlebars.min.js"></script>
    <script src="js/OpenSocialWrapper.js"></script>
    <script src="js/activitystream.js"></script>
  </body>
</html>
